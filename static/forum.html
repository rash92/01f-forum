<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Home</title>
</head>

<body>
	{{$UserInfo := .UserInfo}}

	{{if eq $UserInfo.Name ""}}
	<h1>You are not logged in</h1>
	{{else}}
	<h1>you are logged in as {{.UserInfo.Name}}</h1>
	<a href="/user">User Page</a>
	{{end}}

	<a href="/login">Log in</a>


	{{ if eq $UserInfo.Permission "admin"}}
	<a href="/admin">admin tools</a>
	{{end}}

	{{range .ListOfData}}
	<div>
		{{ if or (eq $UserInfo.Name .OwnerId ) (eq $UserInfo.Permission "admin") (eq $UserInfo.Permission "moderator")}}
		<h1>{{$UserInfo.Name}}</h1>
		<h1>{{$UserInfo.Permission}}</h1>
		<h1>THIS IS MY OWN POST</h1>
		<form method="POST">
			<button name="deletepost" value={{.UUID}}>delete</button>
		</form>
		{{end}}
		<form action="/forum" method="post" target="_self">
			<input type="checkbox" name="postid" id="postid" value="{{.UUID}}" style="visibility: hidden;" checked>
			<div>{{.OwnerId}}</div>
			<div>{{.Content}}</div>
			<div>{{.FormattedTime}}</div>
			<div>{{.Likes}}</div> <input type="submit" name="like" id="like" value="Like">
			<div>{{.Dislikes}}</div> <input type="submit" name="dislike" id="dislike" value="Dislike">
			<a href="/{{.Tag}}">{{.Tag}}</a>
		</form>

	</div>
	<br>



	{{end}}

	{{if ne $UserInfo.Name ""}}
	<div>
		<form action="/forum" method="post">
			<input type="text" name="post" id="post" placeholder="write a post"/>
			<input type="text" name="tag" id="tag" placeholder="enter a tag" />
			<input type="submit" value="submit" />
		</form>
	</div>
	{{else}}
	<h1>You Must Be Logged In to Create Posts</h1>
	{{end}}
</body>

</html>