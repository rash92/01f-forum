{{ template "header" . }}
{{$PostInfo := .Post}}
{{$UserInfo := .UserInfo}}
<div class="container-post">
    <div class="single-post">
        <div class="single-post-title">
            <h2>POST TITLE</h2>
        </div>
        <div class="single-post-author">
            <p>Posted by {{$PostInfo.OwnerId}} at {{$PostInfo.FormattedTime}}</p>
        </div>
        <div class="post-image">
            <img src="/static/uploads/1674486739712898212.jpg"
                alt="Picture of Juptier">
        </div>
        <div class="single-post-content">
            <p>{{$PostInfo.Content}}</p>
        </div>
        <div class="post-comments-likes-dislikes">
            <div>
                <p><i class="fa-regular fa-comment"></i> {{.NumOfComments}}</p>
            </div>
            <form action="/posts/{{$PostInfo.UUID}}" method="post">
                <div class="post-likes-dislikes">
                    {{if ne $UserInfo.Name "" }}
                    <button class="like" name="like" value="{{$PostInfo.UUID}}"><i class="fa-solid fa-thumbs-up"></i></button>
                    {{ else }}
                    <p><i class="fa-solid fa-thumbs-up"></i></p>
                    {{end}}
                    <p>{{$PostInfo.Likes}}</p>
                    {{if ne $UserInfo.Name "" }}
                    <button class="dislike" name="dislike" value="{{$PostInfo.UUID}}"><i
                            class="fa-solid fa-thumbs-down"></i></button>
                    {{else}}
                    <p><i class="fa-solid fa-thumbs-down"></i></p>
                    {{end}}
                    <p>{{$PostInfo.Dislikes}}</p>
                </div>
            </form>
        </div>
        {{if ne $UserInfo.Name ""}}
        <form action="/posts/{{$PostInfo.UUID}}" method="POST">
            <textarea name="comment" id="" cols="30" rows="5" placeholder="Comment" autofocus></textarea>
        </textarea>
            <button type="submit">Comment</button>
        </form>
        {{else}}
        <p>Click <a href="/register">here</a> to reigster to make a comment</p>
        {{end}}
    </div>
    {{range .Comments}}
    <div class="single-post">
        <div class="commentor-name-time">
            <p>{{.OwnerId}}</p>
            <p>{{.Time}}</p>
        </div>
        <div class="comment">
            <p>{{.Content}}</p>
        </div>

        <form action="/posts/{{$PostInfo.UUID}}" method="post">
			<div class="post-likes-dislikes">
				{{if ne $UserInfo.Name "" }}
				<button class="like" name="commentlike" value="{{.UUID}}"><i class="fa-solid fa-thumbs-up"></i></button>
				{{ else }}
				<p><i class="fa-solid fa-thumbs-up"></i></p>
				{{end}}
				<p>{{.Likes}}</p>
				{{if ne $UserInfo.Name "" }}
				<button class="dislike" name="commentdislike" value="{{.UUID}}"><i
						class="fa-solid fa-thumbs-down"></i></button>
				{{else}}
				<p><i class="fa-solid fa-thumbs-down"></i></p>
				{{end}}
				<p>{{.Dislikes}}</p>
			</div>
		</form>
    </div>
    {{end}}
</div>
{{template "footer"}}